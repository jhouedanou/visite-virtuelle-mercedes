<!DOCTYPE html>
<html>
<head>
	<title>krpano.com - dynamically adding and removing panos</title>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<meta name="viewport" content="width=550, initial-scale=0.64, minimum-scale=0.64" />
	<meta http-equiv="x-ua-compatible" content="IE=edge" />
	<style>
		body{ font-family:Arial; font-size:12px; color:#333333; background-color:#FFFFFF; user-select:none; }
		.viewer { float:left; background:white; position:relative; width:320px; height:240px; margin:8px; border:3px double gray; transition:opacity 0.2s ease-out; }
		.removebutton { position:absolute; right:-8px; top:-8px; z-index:99; }
	</style>
</head>
<body>

	<script src="../../krpano.js"></script>
	
	<input type="button" value="Add Viewer" onclick="addviewer();" /><br>

	<script>
		
		var counter = 0;
	
		function addremovebutton(container)
		{
			var removebutton = document.createElement("input");
			removebutton.type = "button";
			removebutton.value = "Remove";
			removebutton.className = "removebutton";
			
			removebutton.onclick = function()
			{
				// remove the viewer
				removepano(container);
				
				// remove the container
				if (container.parentNode)
					container.parentNode.removeChild(container); 
			};
			
			container.appendChild( removebutton );
		}
		
		function addviewer()
		{
			var container = document.createElement("div");
			container.className = "viewer";
			container.style.opacity = 0.0;
			
			addremovebutton(container);
		
			document.body.appendChild(container);
			
			// call the embedpano() function for create and add a new krpano viewer
			embedpano({target:container, mwheel:false, onready:function(krpano)
			{
				// fade-in when loaded
				krpano.events.addListener("onloadcomplete,once", function(){ container.style.opacity = 1.0; });
				
				// load a pano image
				krpano.image.reset();
				krpano.image.preview = {url:"../webvr/panos/intro/preview.jpg"};
				krpano.image.cube = {url:"../webvr/panos/intro/pano_%s.jpg"};
				krpano.actions.loadpanoimage();
				
				// set a random startup view
				krpano.actions.lookat((Math.random()-0.5)*360,(Math.random()-0.5)*180,60+Math.random()*60);
				krpano.view.fisheye = Math.random();
				
				// add a text with the counter number
				var text = krpano.addlayer();
				text.setvars({type:"text", align:"leftbottom", text:(++counter), bg:false, css:"color:white;font-size:10px;"});
			}});
		}
		
		
		// add one viewer at startup
		addviewer();
		
	</script>

</body>
</html>
